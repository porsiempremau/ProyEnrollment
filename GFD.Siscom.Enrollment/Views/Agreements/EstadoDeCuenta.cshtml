@model Object;
@using Newtonsoft.Json;
@{
    dynamic data = JsonConvert.DeserializeObject<Object>(JsonConvert.SerializeObject(Model));

    List<DebtVM> debts = JsonConvert.DeserializeObject<List<DebtVM>>(JsonConvert.SerializeObject(data["debt"]));
    Agreement agreement = JsonConvert.DeserializeObject<Agreement>(JsonConvert.SerializeObject(data["agreement"]));
    ViewData["Title"] = "Estado de Cuenta";
    decimal contPred = 0;
    decimal contLim = 0;
}
<div class="app-page-title">
    <div class="page-title-wrapper">
        <div class="page-title-heading">
            <div class="page-title-icon">
                <i class="fas fa-file-invoice"></i>
            </div>
            <h1 class="style-main-title">@ViewData["Title"]</h1>
        </div>
    </div>
</div>
<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
<div style="        margin-left: auto;
        margin-right: auto;
        width: 700px;
        font-size: 10px;
        font-family: 'Montserrat';
        background: white;
        padding: 22px;
        margin-bottom: 40px;
">

    <div style="margin-bottom: 150px;"></div>

    <div style="margin-left: 27px; margin-right: 27px; margin-bottom: 0;">

        <div style="width: 100%; margin-bottom: 7px; margin-top: 7px;">
            <div style="width: 100%; display: inline-block; margin-top: 0px; padding-left: 7px; ">

                <div style="width: 80%; display: inline-block; ">
                </div>

                <div style="width: 19%; display: inline-block; ">
                    <p style="display: inline-block; margin-bottom: 0px;">Cuenta: @agreement.account</p><br />
                    <p style="display: inline-block; margin-top: 4px;">Fecha Límite:</p>
                </div>

            </div>
        </div>

        <div style="width: 100%; margin-bottom: 7px; margin-top: 7px;">
            <div style="width: 100%; display: inline-block; margin-top: 0px; padding-left: 7px; ">

                <div style="width: 50%; display: inline-block; ">
                    <p style="display: inline-block; margin-bottom: 0px;">NOMBRE: @agreement.clients[0].Name @agreement.clients[0].LastName @agreement.clients[0].SecondLastName</p><br />
                    <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;">DIRECCIÓN: @agreement.addresses[0].Street, @agreement.addresses[0].Outdoor @agreement.addresses.First().suburbs.Name</p><br />
                    <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;">SITUACIÓN SOCIAL: </p><br />
                    <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;">TIPO PREDIO: @(agreement.typeAgreement == "CLI01")</p><br />
                    <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;">TERRENO: @agreement.agreementDetails.First().Ground</p><br />
                </div>

                <div style="width: 49%; display: inline-block; ">
                    <p style="display: inline-block; margin-bottom: 0px;"></p><br />
                    <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;"></p><br />
                    <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;"></p><br />
                    <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;">CONSTRUCCIÓN: @agreement.agreementDetails.First().Built</p><br />
                    <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;">BASE GRAVABLE: @agreement.agreementDetails.First().TaxableBase</p><br />
                </div>

            </div>
        </div>
    </div>

    <div style="margin-bottom: 90px;"></div>

    <div style="margin-left: 10px; margin-right: 0px; margin-bottom: 0; height: 107px;">
        <div style="width: 100%; margin-bottom: 7px; margin-top: 7px;">
            <div style="width: 100%; display: inline-block; margin-top: 0px; padding-left: 7px; ">

                <div style="width: 50%; display: inline-block;">
                    <table style="float: left;">
                        <tbody style="font-size: 9px;">
                            @foreach (var debt in debts)
                            {
                                if (debt.Type == "TIP01")
                                {
                                    <tr>
                                        <td style="padding-right: 35px;">@debt.Year</td>
                                        <td style="padding-right: 32px;">@debt.Amount</td>
                                        <td style="padding-right: 35px;">$0.00</td>
                                        <td style="padding-right: 30px;">$0.00</td>
                                        <td>@debt.Amount</td>
                                    </tr>
                                    contPred = contPred + debt.Amount;
                                }
                            }

                        </tbody>
                    </table>
                </div>

                <div style="width: 49%; display: inline-block;">
                    <table style="float: right;">
                        <tbody style="font-size: 9px;">
                            @foreach (var debt in debts)
                            {
                                if (debt.Type == "TIP04")
                                {
                                    <tr>
                                        <td style="padding-right: 35px;">@debt.Year</td>
                                        <td style="padding-right: 32px;">@debt.Amount</td>
                                        <td style="padding-right: 35px;">$0.00</td>
                                        <td style="padding-right: 30px;">$0.00</td>
                                        <td>@debt.Amount</td>
                                    </tr>
                                    contLim = contLim + @debt.Amount;
                                }
                            }
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>

    <div style="margin-left: 10px; margin-right: 0px; margin-bottom: 0;">
        <div style="width: 100%; margin-bottom: 7px; margin-top: 7px;">
            <div style="width: 100%; display: inline-block; margin-top: 0px; padding-left: 7px; ">

                <div style="width: 50%; display: inline-block;">
                    <p style="text-align: center;"><b>Total a pagar (PREDIAL):</b> $@contPred</p>
                </div>

                <div style="width: 49%; display: inline-block;">
                    <p style="text-align: center;"><b>Total a pagar (LIMPIA):</b> $@contLim</p>
                </div>

            </div>
        </div>
    </div>

    <div style="margin-bottom: 90px;"></div>

    <div style="margin-left: 10px; margin-right: 0px; margin-bottom: 0; height:100px;">
        <div style="width: 100%; margin-bottom: 7px; margin-top: 7px;">
            <div style="width: 100%; display: inline-block; margin-top: 0px; padding-left: 7px; ">

                <div style="width: 50%; display: inline-block; ">
                    <div style="margin-left: 61px;">
                        <p style="display: inline-block; margin-bottom: 0px;">SUBTOTAL:</p><br />
                        <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;">DESC. PRONTO PAGO: $0.00</p><br />
                        <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;">PROM. RECARGOS: $0.00</p><br />
                        <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;">TOTAL (PREDIAL): $@contPred</p><br />
                    </div>
                </div>

                <div style="width: 49%; display: inline-block; ">
                    <div style="margin-left: 86px;">
                        <p style="display: inline-block; margin-bottom: 0px;">SUBTOTAL:</p><br />
                        <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;">DESC. PRONTO PAGO: $0.00</p><br />
                        <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;">PROM. RECARGOS: $0.00</p><br />
                        <p style="display: inline-block; margin-bottom: 0px; margin-top: 4px;">TOTAL (LIMPIA): $@contLim</p><br />
                    </div>
                </div>

            </div>
        </div>
    </div>

</div>

